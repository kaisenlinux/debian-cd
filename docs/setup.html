<html>
<head>
<title>Setup</title>
</head>
<body>
<h1>Setup</h1>

<p>Configuration for debian-cd is stored in the file CONF.sh. This
file is a shell script that is sourced in by the build scripts;
options are set up in the file using standard shell syntax for
environment variable handling.</p>

<p>The file that is shipped by default with debian-cd is
well-commented, but is rather large and may be initimidating to new
users. There are <strong>lots</strong> of options, but most of them
have sane defaults and can be ignored in common use.</p>

<h2>Necessary configuration</h2>

<p>The key options that would always be configured by a user are:</p>

<ul>
<li><code>CODENAME</code> - typically "etch", "lenny" or "sid"
<li><code>DEBVERSION</code> - the version number to go with that codename
<li><code>OFFICIAL</code> - do <strong>not</strong> claim to be making official Debian CDs here!
<li><code>MIRROR</code> - specify the absolute path to your mirror of the Debian archive
<li><code>TDIR</code> - a path to a temporary directory; should be on the same filesystem as <code>MIRROR</code> so that hard links work
<li><code>OUT</code> - the directory where ISO images and/or jigdo files will be created
<li><code>APTTMP</code> - another temporary directory for layout code; can live anywhere
<li><code>ARCHES</code> - (optionally) specify the architecture(s) to
build for. If you you want a multi-arch disc set, specify all the
arches you want as one argument, using quotes (e.g. "amd64 i386
powerpc")
<li><code>DISKTYPE</code> - the type of disc you're trying to
build. Recognised values are: <code>BC</code>, <code>NETINST</code>,
<code>CD</code>, <code>CD700</code>, <code>DVD</code> and
<code>CUSTOM</code>. The disc type is mainly used to decide the
allowable size per output image. If you choose <code>CUSTOM</code>,
then you'll also need to set <code>CUSTOMSIZE</code> to the size of
your media.
</ul>

<p>Setting these options is sufficient to allow creation of a standard
set of CDs for your architecture, that should look very similar to the
official Debian builds. To actually start the build for one
architecture, run <code>build.sh $ARCH</code>. To build for more
architectures, run <code>build_all.sh</code>.</p>

<h2>More advanced configuration</h2>

<p>A larger set of options that might be commonly tweaked by users
wanting to make different images include:</p>

<ul>
<li><code>DI_WWW_HOME</code> - specify the location of d-i boot images to go on the first CD rather than the default ones from the mirror
<li><code>CONTRIB</code> - whether or not to allow packages from the contrib section onto the CDs
<li><code>NONFREE</code> - whether or not to allow packages from the non-free section onto the CDs
<li><code>EXTRANONFREE</code> - like <code>NONFREE</code>, but sort the non-free packages to a separate last CD instead of mixing them in
<li><code>LOCAL</code> - if you have a local set of packages that you want to merge into your CDs, specify the location here. The location should look just like the other sections (main, contrib, non-free) with Packages files etc.
<li><code>LOCALDEBS</code> - if you have set <code>LOCAL</code> above
and the local packages are outside of the <code>MIRROR</code> tree,
specify the local here.
<li><code>EXCLUDE</code> - specifies a file listing packages that should be omitted from consideration when laying out the CDs
<li><code>UNEXCLUDE$N</code> - a way to re-add excluded packages back into the set, starting with CD number $N. Using <code>EXCLUDE</code> and <code>UNEXCLUDE</code> allows some finer-grained control of package placement if desired
<li><code>DOJIGDO</code> - specify what to create: 0 means ISOs only; 1 means ISOs and jigdo files; 2 means jigdo files only
<li><code>JIGDOFALLBACKPATH</code> - if you're publishing jigdo files, you may specify a location here and debian-cd will create a snapshot tree for you
<li><code>JIGDOFALLBACKURLS</code> - this is how to specify the URL that the <code>JIGDOFALLBACKPATH</code> corresponds to
<li><code>UDEB_INCLUDE</code> - a file listing installer udebs that should be pushed into the install system
<li><code>UDEB_EXCLUDE</code> - opposite of <code>UDEB_INCLUDE</code>
<li><code>BASE_INCLUDE</code> - a file listing packages that should be installed onto the target system by d-i
<li><code>BASE_EXCLUDE</code> - packages that should <strong>not</strong> be installed
<li><code>INSTALLER_CD</code> - use this to specify the type of disc to create: 0 means a normal CD/DVD set; 1 means a "business card", i.e. just d-i and no packages; 2 means a "netinst", i.e. d-i and the base system only
<li><code>MAXCDS</code> - a way to limit how many CDs will be built; this won't force packages to fit, but will simply cut off the build once the specified number are done
<li><code>SPLASHPNG</code> - specify the image to be used on the boot splash screen, on architectures where this is supported
</ul>

<p>If you do tweak some of these options, it may take quite a few
iterations of testing to get exactly what you're looking for. Be
warned!</p>

<p>For more information and yet more configuration, please see the
comments in the shipped CONF.sh file. Or, if in doubt, ask!</p>

<hr>
(c) Steve McIntyre &lt;steve@einval.com&gt;, December 2006. GPL v2<br>
<a href="requirements.html">Prev - debian-cd requirements</a><br>
<a href="running.html">Next - Running debian-cd to make some disc images</a>
</body>
</html>
